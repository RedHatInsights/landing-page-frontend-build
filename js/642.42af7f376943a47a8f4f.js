/*! For license information please see 642.42af7f376943a47a8f4f.js.LICENSE.txt */
"use strict";(self.webpackChunklanding_page_frontend=self.webpackChunklanding_page_frontend||[]).push([[642,292],{642:(e,t,n)=>{n.r(t),n.d(t,{ChromeContext:()=>u,ChromeProvider:()=>g,UpdateEvents:()=>c,useFavoritePages:()=>w,useLastVisited:()=>y});var r=n(5893),o=n(2950),i=n(3023),a=n(7768);const u=(0,o.createContext)({update:function(){},setLastVisited:function(){},setFavoritePages:function(){},subscribe:function(){return 0},unsubscribe:function(){},getState:function(){return{lastVisitedPages:[],subscribtions:{},favoritePages:[]}}});var c,s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};!function(e){e.lastVisited="lastVisited",e.favoritePages="favoritePages"}(c||(c={}));var f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)},l="/api/chrome-service/v1",p="".concat(l,"/last-visited"),v="".concat(l,"/favorite-pages");function h(e,t){return fetch(e,f(f({},t),{method:"GET"})).then((function(e){return e.json()})).then((function(e){return e.data}))}function d(e,t,n){return fetch(e,f(f({credentials:"include"},n),{headers:f(f({},null==n?void 0:n.headers),{"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(t)})).then((function(e){return e.json()})).then((function(e){return e.data}))}var b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},b.apply(this,arguments)};const g=function(e){var t=e.children,n=e.bundle,f=(0,a.useFlag)("platform.chrome.chrome-service"),l=(0,o.useRef)(!1),g=(0,o.useState)(!1),y=g[0],P=g[1],O=(0,o.useRef)();return O.current||(O.current=function(){var e={lastVisitedPages:[],favoritePages:[]},t={lastVisited:[],favoritePages:[]};function n(n,r){e=s(s({},e),r);var o=t[n];0!==o.length&&o.forEach((function(e){(0,e.onUpdate)()}))}return{getState:function(){return e},setLastVisited:function(e){n(c.lastVisited,{lastVisitedPages:e})},setFavoritePages:function(e){n(c.favoritePages,{favoritePages:e})},subscribe:function(e,n){var r=t[e].length;return t[e].push({onUpdate:n}),n(),r},unsubscribe:function(e,n){e<t[n].length?t[n].splice(e,1):console.error("Trying to unsubscribe client outside of the range!")},update:n}}()),function(e,t,n){void 0===n&&(n="");var r=(0,i.useLocation)().pathname;(0,o.useEffect)((function(){t&&d(p,{pathname:r,title:document.title,bundle:n}).then((function(t){return e.setLastVisited(t)}))}),[r])}(O.current,f,n),(0,o.useEffect)((function(){return l.current=!0,f&&!y&&Promise.all([h(p),h("".concat(v,"?getAll=true"))]).then((function(e){var t,n,r=e[0],o=e[1];l.current&&(null===(t=O.current)||void 0===t||t.setLastVisited(r),null===(n=O.current)||void 0===n||n.setFavoritePages(o),P(!0))})),function(){l.current=!1}}),[f]),(0,r.jsx)(u.Provider,b({value:O.current},{children:t}))},y=function(){var e=(0,o.useContext)(u),t=e.subscribe,n=e.unsubscribe,r=e.getState,i=(0,o.useReducer)((function(e){return e+1}),0)[1];return(0,o.useEffect)((function(){var e=t(c.lastVisited,i);return function(){n(e,c.lastVisited)}}),[]),r().lastVisitedPages};var P=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},O=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},m=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function j(e,t){return d(v,{pathname:e,favorite:t})}const w=function(){var e=(0,o.useContext)(u),t=e.subscribe,n=e.unsubscribe,r=e.getState,i=e.setFavoritePages,a=(0,o.useReducer)((function(e){return e+1}),0)[1];function s(e,t){return P(this,void 0,void 0,(function(){var n,o,a;return O(this,(function(u){switch(u.label){case 0:n=r().favoritePages,u.label=1;case 1:return u.trys.push([1,3,,4]),i(m(m([],n,!0),[{pathname:e,favorite:t}],!1)),[4,j(e,t)];case 2:return o=u.sent(),i(o),[2,o];case 3:return a=u.sent(),console.error(a),i(n),[2,n];case 4:return[2]}}))}))}return(0,o.useEffect)((function(){var e=t(c.favoritePages,a);return function(){n(e,c.favoritePages)}}),[]),{favoritePages:r().favoritePages,favoritePage:function(e){return P(this,void 0,void 0,(function(){return O(this,(function(t){return[2,s(e,!0)]}))}))},unfavoritePage:function(e){return s(e,!1)}}}},7418:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var a,u,c=o(e),s=1;s<arguments.length;s++){for(var f in a=Object(arguments[s]))n.call(a,f)&&(c[f]=a[f]);if(t){u=t(a);for(var l=0;l<u.length;l++)r.call(a,u[l])&&(c[u[l]]=a[u[l]])}}return c}},5251:(e,t,n)=>{n(7418);var r=n(2950),o=60103;if("function"==typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),i("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var r,i={},s=null,f=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(f=t.ref),t)u.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:s,ref:f,props:i,_owner:a.current}}},5893:(e,t,n)=>{e.exports=n(5251)}}]);
//# sourceMappingURL=../sourcemaps/642.133251f70bfe7015871d6942bf74a4ae.js.map