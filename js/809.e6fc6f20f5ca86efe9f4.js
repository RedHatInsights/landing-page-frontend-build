/*! For license information please see 809.e6fc6f20f5ca86efe9f4.js.LICENSE.txt */
(self.webpackChunklanding=self.webpackChunklanding||[]).push([[809],{4809:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ChromeContext:()=>c,ChromeProvider:()=>P,UpdateEvents:()=>l,useFavoritePages:()=>B,useLastVisited:()=>O,useVisitedBundles:()=>_});var r=n(5893),i=n(8416),o=n(4025),a=n(6114),u=n(3279),s=n.n(u);const c=(0,i.createContext)({update:function(){},setLastVisited:function(){},setFavoritePages:function(){},subscribe:function(){return Symbol(0)},unsubscribe:function(){},setIdentity:function(){},setVisitedBundles:function(){},getState:function(){return{lastVisitedPages:[],subscribtions:{},favoritePages:[],visitedBundles:{},initialized:!1}}});var l,f=function(){return f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},f.apply(this,arguments)};!function(t){t.lastVisited="lastVisited",t.favoritePages="favoritePages",t.visitedBundles="visitedBundles"}(l||(l={}));var d=function(){return d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},d.apply(this,arguments)},v=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},p=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},h="/api/chrome-service/v1",b="".concat(h,"/last-visited"),y="".concat(h,"/favorite-pages"),g="".concat(h,"/user"),w="".concat(h,"/user/visited-bundles");function m(t,e){var n=this;return fetch(t,e).then((function(t){return v(n,void 0,void 0,(function(){var e,n,r;return p(this,(function(i){switch(i.label){case 0:return t.ok?[3,5]:(e=t.clone(),(null===(r=e.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"))?[4,e.json()]:[3,2]);case 1:return n=i.sent(),[3,4];case 2:return[4,e.text()];case 3:n=i.sent(),i.label=4;case 4:throw n;case 5:return[2,t.json()]}}))}))}))}function x(t,e,n){return m(t,d(d({credentials:"include"},n),{headers:d(d({},null==n?void 0:n.headers),{"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(e)})).then((function(t){return t.data}))}var S=(s()((function(t,e,n){return r=void 0,i=void 0,a=function(){return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(r){switch(r.label){case 0:return[4,x(b,{pathname:t,title:e,bundle:n})];case 1:return[2,r.sent()]}}))},new((o=void 0)||(o=Promise))((function(t,e){function n(t){try{s(a.next(t))}catch(t){e(t)}}function u(t){try{s(a.throw(t))}catch(t){e(t)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o((function(t){t(r)}))).then(n,u)}s((a=a.apply(r,i||[])).next())}));var r,i,o,a}),5e3),"chrome:lastVisited");const P=function(t){var e=t.children,n=(0,i.useRef)(!1),u=(0,i.useState)(!1),s=u[0],v=u[1],p=(0,i.useRef)();return p.current||(p.current=function(){var t={lastVisitedPages:[],favoritePages:[],visitedBundles:{},initialized:!1},e={lastVisited:new Map,favoritePages:new Map,visitedBundles:new Map};function n(n,r){t=f(f({},t),r);var i=e[n];0!==i.size&&Array.from(i.values()).forEach((function(t){t.onUpdate()}))}return{getState:function(){return t},setLastVisited:function(t){n(l.lastVisited,{lastVisitedPages:t})},setIdentity:function(n){t=f(f({},n),{initialized:!0}),Object.values(e).flat().forEach((function(t){Array.from(t.values()).forEach((function(t){t.onUpdate()}))}))},setFavoritePages:function(t){n(l.favoritePages,{favoritePages:t})},setVisitedBundles:function(t){n(l.visitedBundles,{visitedBundles:t})},subscribe:function(t,n){var r=Symbol(t);return e[t].set(r,{onUpdate:n}),n(),r},unsubscribe:function(t,n){e[n].has(t)?e[n].delete(t):console.error("Trying to unsubscribe non existing client!")},update:n}}()),function(t){var e=(0,a.useLocation)().pathname,n=(0,o.useScalprum)(),r=document.querySelector("title");(0,i.useEffect)((function(){var i,o,a;if(localStorage.getItem(S))try{var u=JSON.parse(null!==(i=localStorage.getItem(S))&&void 0!==i?i:"[]");Array.isArray(u)?t.setLastVisited(u):(localStorage.setItem(S,JSON.stringify([])),t.setLastVisited([]))}catch(e){console.error("Unable to parse last visited pages from localStorage!",e),t.setLastVisited([]),localStorage.setItem(S,JSON.stringify([]))}return r&&(o=new MutationObserver((function(r){var i,o,u=null===(i=r[0])||void 0===i?void 0:i.target.textContent;if("string"==typeof u&&u!==a)try{a=u;var s=t.getState().lastVisitedPages.filter((function(t){return t.pathname!==e}));s.unshift({pathname:e,title:u,bundle:null===(o=n.api)||void 0===o?void 0:o.chrome.getBundleData().bundleTitle}),t.setLastVisited(s.slice(0,10)),localStorage.setItem(S,JSON.stringify(s.slice(0,10)))}catch(t){console.error("Unable to update last visited pages!",t)}})),o.observe(r,{childList:!0})),function(){null==o||o.disconnect()}}),[e])}(p.current),(0,i.useEffect)((function(){return n.current=!0,s||m(g,d(d({},void 0),{method:"GET"})).then((function(t){return t.data})).then((function(t){var e;n.current&&(null===(e=p.current)||void 0===e||e.setIdentity(t),v(!0))})).catch((function(t){console.error("Unable to initialize ChromeProvider!",t)})),function(){n.current=!1}}),[]),(0,r.jsx)(c.Provider,{value:p.current,children:e})},O=function(){var t=(0,i.useContext)(c),e=t.subscribe,n=t.unsubscribe,r=t.getState,o=(0,i.useReducer)((function(t){return t+1}),0)[1];return(0,i.useEffect)((function(){var t=e(l.lastVisited,o);return function(){n(t,l.lastVisited)}}),[]),r().lastVisitedPages};var j=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},k=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},V=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function E(t,e){return x(y,{pathname:t,favorite:e})}const B=function(){var t=(0,i.useContext)(c),e=t.subscribe,n=t.unsubscribe,r=t.getState,o=t.setFavoritePages,a=(0,i.useReducer)((function(t){return t+1}),0)[1];function u(t,e){return j(this,void 0,void 0,(function(){var n,i,a;return k(this,(function(u){switch(u.label){case 0:n=r().favoritePages,u.label=1;case 1:return u.trys.push([1,3,,4]),o(V(V([],n,!0),[{pathname:t,favorite:e}],!1)),[4,E(t,e)];case 2:return i=u.sent(),o(i),[2,i];case 3:return a=u.sent(),console.error(a),o(n),[2,n];case 4:return[2]}}))}))}return(0,i.useEffect)((function(){var t=e(l.favoritePages,a);return function(){n(t,l.favoritePages)}}),[]),{favoritePages:r().favoritePages,favoritePage:function(t){return j(this,void 0,void 0,(function(){return k(this,(function(e){return[2,u(t,!0)]}))}))},unfavoritePage:function(t){return u(t,!1)},initialized:r().initialized}};function T(t){return x(w,{bundle:t})}const _=function(){var t=(0,i.useContext)(c),e=t.subscribe,n=t.unsubscribe,r=t.getState,o=t.setVisitedBundles,a=(0,i.useReducer)((function(t){return t+1}),0)[1];return(0,i.useEffect)((function(){var t=e(l.visitedBundles,a);return function(){n(t,l.visitedBundles)}}),[]),{visitedBundles:r().visitedBundles,markVisited:function(t){var e,n,i,a,u;return n=this,i=void 0,u=function(){var n;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(i){switch(i.label){case 0:return(null===(e=r().visitedBundles)||void 0===e?void 0:e[t])?[3,2]:[4,T(t)];case 1:return n=i.sent(),o(n.visitedBundles),[2,n.visitedBundles];case 2:return[2,r().visitedBundles]}}))},new((a=void 0)||(a=Promise))((function(t,e){function r(t){try{s(u.next(t))}catch(t){e(t)}}function o(t){try{s(u.throw(t))}catch(t){e(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}s((u=u.apply(n,i||[])).next())}))},initialized:r().initialized}}},2705:(t,e,n)=>{var r=n(5639).Symbol;t.exports=r},4239:(t,e,n)=>{var r=n(2705),i=n(9607),o=n(2333),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},4107:(t,e,n)=>{var r=n(7990),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},1957:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},9607:(t,e,n)=>{var r=n(2705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[u]=n:delete t[u]),i}},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5639:(t,e,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},7990:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},3279:(t,e,n)=>{var r=n(3218),i=n(7771),o=n(4841),a=Math.max,u=Math.min;t.exports=function(t,e,n){var s,c,l,f,d,v,p=0,h=!1,b=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=s,r=c;return s=c=void 0,p=e,f=t.apply(r,n)}function w(t){var n=t-v;return void 0===v||n>=e||n<0||b&&t-p>=l}function m(){var t=i();if(w(t))return x(t);d=setTimeout(m,function(t){var n=e-(t-v);return b?u(n,l-(t-p)):n}(t))}function x(t){return d=void 0,y&&s?g(t):(s=c=void 0,f)}function S(){var t=i(),n=w(t);if(s=arguments,c=this,v=t,n){if(void 0===d)return function(t){return p=t,d=setTimeout(m,e),h?g(t):f}(v);if(b)return clearTimeout(d),d=setTimeout(m,e),g(v)}return void 0===d&&(d=setTimeout(m,e)),f}return e=o(e)||0,r(n)&&(h=!!n.leading,l=(b="maxWait"in n)?a(o(n.maxWait)||0,e):l,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==d&&clearTimeout(d),p=0,s=v=c=d=void 0},S.flush=function(){return void 0===d?f:x(i())},S}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},3448:(t,e,n)=>{var r=n(4239),i=n(7005);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},7771:(t,e,n)=>{var r=n(5639);t.exports=function(){return r.Date.now()}},4841:(t,e,n)=>{var r=n(4107),i=n(3218),o=n(3448),a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=u.test(t);return n||s.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},5251:(t,e,n)=>{"use strict";var r=n(8416),i=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};e.jsx=function(t,e,n){var r,s={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(l=e.ref),e)o.call(e,r)&&!u.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===s[r]&&(s[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:l,props:s,_owner:a.current}}},5893:(t,e,n)=>{"use strict";t.exports=n(5251)}}]);
//# sourceMappingURL=../sourcemaps/809.ebe2cdbd53cb974f5fba173ef8fc3066.js.map